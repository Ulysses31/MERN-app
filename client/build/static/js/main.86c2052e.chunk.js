(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(9),r=n(10),a=n.n(r),s=(n(16),n(4)),u=n(2),d=n(6),j=n(11);function l(e,t){switch(t.type){case"SELECTED_MOVIE":return Object(u.a)(Object(u.a)({},e),{},{selectedMovie:t.payload});case"GET_MOVIES":return Object(u.a)(Object(u.a)({},e),{},{movies:t.payload});case"ADD_MOVIE":return Object(u.a)(Object(u.a)({},e),{},{movies:[].concat(Object(j.a)(e.movies),[t.payload])});case"DELETE_MOVIE":return Object(u.a)(Object(u.a)({},e),{},{movies:e.movies.filter((function(e){return e._id!==t.payload}))});case"UPDATE_MOVIE":return Object(u.a)(Object(u.a)({},e),{},{movies:e.movies.map((function(e){return e._id===t.payload._id?t.payload:e}))});default:return e}}var b=n(0),O={movies:[],selectedMovie:{_id:0,title:"",genre:"",year:"",createdAt:""}},f=Object(c.createContext)(O);function v(e){var t=e.children,n=Object(c.useReducer)(l,O),o=Object(d.a)(n,2),i=o[0],r=o[1];return Object(b.jsx)(f.Provider,{value:{movies:i.movies,selectedMovie:i.selectedMovie,setSelectedMovie:function(e){r({type:"SELECTED_MOVIE",payload:e})},getMovies:function(){fetch("/movies").then((function(e){if(e.ok)return e.json()})).then((function(e){r({type:"GET_MOVIES",payload:e})})).catch((function(e){return console.log(e)}))},addMovie:function(e){r({type:"ADD_MOVIE",payload:e})},deleteMovie:function(e){r({type:"DELETE_MOVIE",payload:e})},updateMovie:function(e){r({type:"UPDATE_MOVIE",payload:e})}},children:t})}n(8);var p=function(){var e=Object(c.useContext)(f),t=e.addMovie,n=e.updateMovie,o=e.selectedMovie,i=e.setSelectedMovie,r=Object(c.useState)({_id:0,title:"",genre:"",year:""}),a=Object(d.a)(r,2),j=a[0],l=a[1];Object(c.useEffect)((function(){l(o),console.log(o)}),[o]);var O=function(e){l(Object(u.a)(Object(u.a)({},j),{},Object(s.a)({},e.target.name,e.target.value)))},v=function(){i({_id:0,title:"",genre:"",year:0})};return Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j&&(0===j._id?fetch("/movies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(e){t(e)})):fetch("/movies",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(e){1===e.nModified&&n(j)})),v())},children:[Object(b.jsx)("input",{type:"text",placeholder:"Title",name:"title",value:j.title,onChange:O}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"Genre",name:"genre",value:j.genre,onChange:O}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"Year",name:"year",value:j.year,onChange:O}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{type:"submit",children:0===j._id?"Insert":"Update"}),Object(b.jsx)("button",{type:"button",onClick:function(){v()},children:"Clear"})]})};var h=function(){var e=Object(c.useContext)(f),t=e.movies,n=e.getMovies,o=e.deleteMovie,i=e.setSelectedMovie;return Object(c.useEffect)((function(){n()}),[]),Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Movies"}),t&&t.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsx)("button",{onClick:function(){var t;(t=e._id)&&fetch("/movies/".concat(t),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){1===e.deletedCount&&o(t)})).catch((function(e){return console.log(e)}))},children:"Delete"}),Object(b.jsx)("button",{onClick:function(){return function(e){i(e)}(e)},children:"Edit"}),Object(b.jsxs)("p",{children:["Genre: ",e.genre]}),Object(b.jsxs)("p",{children:["Year: ",e.year]})]},e._id)}))]})};var y=function(){return Object(b.jsx)(v,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(p,{}),Object(b.jsx)("hr",{}),Object(b.jsx)(h,{})]})})},E=(n(18),document.getElementById("root"));a.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(y,{})}),E),Object(i.a)(E,{debugReducer:!1,debugContext:!1,disable:!0})},8:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.86c2052e.chunk.js.map